"use strict";function _toConsumableArray(o){if(Array.isArray(o)){for(var e=0,t=Array(o.length);e<o.length;e++)t[e]=o[e];return t}return Array.from(o)}!function(o){"function"==typeof define&&define.amd?define(["jquery"],o):o(jQuery)}(function(o){var e="url('data:image/svg+xml;utf8,&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 0 11 11&quot; fill=&quot;white&quot;&gt;&lt;g fill=&quot;rgb(204,204,204)&quot;&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; width=&quot;5.5&quot; height=&quot;5.5&quot;/&gt;&lt;rect x=&quot;5.5&quot; y=&quot;5.5&quot; width=&quot;5.5&quot; height=&quot;5.5&quot;/&gt;&lt;/g&gt;&lt;/svg&gt;')",t=0,i='<div class="ui-colorpicker ui-colorpicker-dialog ui-dialog ui-widget ui-widget-content ui-corner-all" style="display: none;"></div>',r='<div class="ui-colorpicker ui-colorpicker-inline ui-dialog ui-widget ui-widget-content ui-corner-all"></div>',n='<div class="ui-colorpicker ui-colorpicker-inline"></div>',a=function(o){var e=Math.round(o).toString(16);return 1===e.length&&(e="0"+e),e.toLowerCase()},s=function(e){var t,i;return i=/^#?([a-fA-F0-9]{1,6})$/.exec(e),i?(t=parseInt(i[1],16),new o.colorpicker.Color((t>>16&255)/255,(t>>8&255)/255,(255&t)/255)):new o.colorpicker.Color},c=function(e,t){var i,r,n,a,s,c,l,u,p,h,d,b,g,k;for(e.sort(function(o,e){return o.pos[1]===e.pos[1]?o.pos[0]-e.pos[0]:o.pos[1]-e.pos[1]}),a=0,s=0,o.each(e,function(o,e){a=Math.max(a,e.pos[0]+e.pos[2]),s=Math.max(s,e.pos[1]+e.pos[3])}),i=[],r=0;a>r;++r)i.push([]);for(l=[],c=[],o.each(e,function(o,e){for(r=0;r<e.pos[2];r+=1)c[e.pos[0]+r]=!0;for(n=0;n<e.pos[3];n+=1)l[e.pos[1]+n]=!0}),h="",p=e[u=0],n=0;s>n;++n){for(h+="<tr>",r=0;a>r;)if("undefined"!=typeof p&&r===p.pos[0]&&n===p.pos[1]){for(h+=t(p,r,n),b=0;b<p.pos[3];b+=1)for(d=0;d<p.pos[2];d+=1)i[r+d][n+b]=!0;r+=p.pos[2],p=e[++u]}else{for(g=0,k=!1;a>r&&void 0===i[r][n]&&(void 0===p||n<p.pos[1]||n===p.pos[1]&&r<p.pos[0]);)c[r]===!0&&(g+=1),k=!0,r+=1;g>0?h+='<td colspan="'+g+'"></td>':k||(r+=1)}h+="</tr>"}return'<table cellspacing="0" cellpadding="0" border="0"><tbody>'+h+"</tbody></table>"},l=-1;return o.colorpicker=new function(){this.regional={"":{ok:"OK",cancel:"Cancel",none:"None",button:"Color",title:"Pick a color",transparent:"Transparent",hsvH:"H",hsvS:"S",hsvV:"B",rgbR:"R",rgbG:"G",rgbB:"B",labL:"L",labA:"a",labB:"b",hslH:"H",hslS:"S",hslL:"L",cmykC:"C",cmykM:"M",cmykY:"Y",cmykK:"K",alphaA:"A"}},this.swatches={_:[]},this.writers={"#HEX":function(o,e){return e._formatColor("#rxgxbx",o)}},this.parsers={"":function(e){return""===e?new o.colorpicker.Color:void 0}},this.partslists={full:["header","map","bar","hex","hsv","rgb","alpha","lab","cmyk","preview","swatches","footer"],popup:["map","bar","hex","hsv","rgb","alpha","preview","footer"],draggable:["header","map","bar","hex","hsv","rgb","alpha","preview","footer"],inline:["map","bar","hex","hsv","rgb","alpha","preview"]},this.limits={websafe:function(o){o.limit(6)},nibble:function(o){o.limit(16)},binary:function(o){o.limit(2)},name:function(o,e){var t=e._getSwatch(e._closestName(o));o.setRGB(t.r,t.g,t.b)}},this.parts={header:function(e){var t=null,i=function(){var o=e.options.title||e._getRegional("title"),t='<span class="ui-dialog-title">'+o+"</span>";return!e.inline&&e.options.showCloseButton&&(t+='<a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button"><span class="ui-icon ui-icon-closethick">close</span></a>'),'<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">'+t+"</div>"};this.init=function(){t=o(i()).prependTo(e.dialog);var r=o(".ui-dialog-titlebar-close",t);if(e._hoverable(r),e._focusable(r),r.click(function(o){o.preventDefault(),e.close(e.options.revert)}),!e.inline&&e.options.draggable){var n={handle:t};e.options.containment&&(n.containment=e.options.containment),e.dialog.draggable(n)}}},map:function(e){var t,i,r,n,a,s,c,l=this,u=null,p={};n=function(t){if(e.opened){var c=p.p.offset(),l=t.pageX-c.left,h=t.pageY-c.top;l>=0&&i>l&&h>=0&&r>h&&(t.stopImmediatePropagation(),t.preventDefault(),u.unbind("mousedown",n),o(document).bind("mouseup",a),o(document).bind("mousemove",s),s(t))}},a=function(t){t.stopImmediatePropagation(),t.preventDefault(),o(document).unbind("mouseup",a),o(document).unbind("mousemove",s),u.bind("mousedown",n),e._callback("stop")},s=function(o){if(o.stopImmediatePropagation(),o.preventDefault(),o.pageX!==l.x||o.pageY!==l.y){l.x=o.pageX,l.y=o.pageY;var t=p.p.offset(),n=o.pageX-t.left,a=o.pageY-t.top;switch(n=Math.max(0,Math.min(n/i,1)),a=Math.max(0,Math.min(a/r,1)),e.mode){case"h":e.color.setHSV(null,n,1-a);break;case"s":case"a":e.color.setHSV(n,null,1-a);break;case"v":e.color.setHSV(n,1-a,null);break;case"r":e.color.setRGB(null,1-a,n);break;case"g":e.color.setRGB(1-a,null,n);break;case"b":e.color.setRGB(n,1-a,null)}e._change(!1)}},c=function(){var o='<div class="ui-colorpicker-map ui-colorpicker-map-'+(e.options.part.map.size||256)+' ui-colorpicker-border"><span class="ui-colorpicker-map-layer-1">&nbsp;</span><span class="ui-colorpicker-map-layer-2">&nbsp;</span>'+(e.options.alpha?'<span class="ui-colorpicker-map-layer-alpha">&nbsp;</span>':"")+'<span class="ui-colorpicker-map-layer-pointer"><span class="ui-colorpicker-map-pointer"></span></span></div>';return o},this.init=function(){u=o(c()).appendTo(o(".ui-colorpicker-map-container",e.dialog)),u.bind("mousedown",n),p[1]=o(".ui-colorpicker-map-layer-1",u),p[2]=o(".ui-colorpicker-map-layer-2",u),p.a=o(".ui-colorpicker-map-layer-alpha",u),p.p=o(".ui-colorpicker-map-layer-pointer",u),i=p.p.width(),r=p.p.height(),t=o(".ui-colorpicker-map-pointer",u)},this.update=function(){var o=65*(e.options.part.map.size||256)/64;switch(e.mode){case"h":p[1].css({"background-position":"0 0",opacity:""}).show(),p[2].hide();break;case"s":case"a":p[1].css({"background-position":"0 "+-o+"px",opacity:""}).show(),p[2].css({"background-position":"0 "+2*-o+"px",opacity:""}).show();break;case"v":u.css("background-color","black"),p[1].css({"background-position":"0 "+3*-o+"px",opacity:""}).show(),p[2].hide();break;case"r":p[1].css({"background-position":"0 "+4*-o+"px",opacity:""}).show(),p[2].css({"background-position":"0 "+5*-o+"px",opacity:""}).show();break;case"g":p[1].css({"background-position":"0 "+6*-o+"px",opacity:""}).show(),p[2].css({"background-position":"0 "+7*-o+"px",opacity:""}).show();break;case"b":p[1].css({"background-position":"0 "+8*-o+"px",opacity:""}).show(),p[2].css({"background-position":"0 "+9*-o+"px",opacity:""}).show()}l.repaint()},this.repaint=function(){var o=0,r=0;switch(e.mode){case"h":var n=e.color.getHSV();o=n.s*i,r=(1-n.v)*i,u.css("background-color",e.color.copy().setHSV(null,1,1).toCSS());break;case"s":case"a":var n=e.color.getHSV();o=n.h*i,r=(1-n.v)*i,p[2].css("opacity",1-n.s);break;case"v":var n=e.color.getHSV();o=n.h*i,r=(1-n.s)*i,p[1].css("opacity",n.v);break;case"r":var a=e.color.getRGB();o=a.b*i,r=(1-a.g)*i,p[2].css("opacity",a.r);break;case"g":var a=e.color.getRGB();o=a.b*i,r=(1-a.r)*i,p[2].css("opacity",a.g);break;case"b":var a=e.color.getRGB();o=a.r*i,r=(1-a.g)*i,p[2].css("opacity",a.b)}e.options.alpha&&p.a.css("opacity",1-e.color.getAlpha()),t.css({left:o-7,top:r-7})}},bar:function(e){var t,i,r,n,a,s,c,l=this,u=null,p={};n=function(t){if(e.opened){var c=p.p.offset(),l=t.pageX-c.left,h=t.pageY-c.top;l>=0&&i>l&&h>=0&&r>h&&(t.stopImmediatePropagation(),t.preventDefault(),u.unbind("mousedown",n),o(document).bind("mouseup",a),o(document).bind("mousemove",s),s(t))}},a=function(t){t.stopImmediatePropagation(),t.preventDefault(),o(document).unbind("mouseup",a),o(document).unbind("mousemove",s),u.bind("mousedown",n),e._callback("stop")},s=function(o){if(o.stopImmediatePropagation(),o.preventDefault(),o.pageY!==l.y){l.y=o.pageY;var t=p.p.offset(),i=o.pageY-t.top;switch(i=Math.max(0,Math.min(i/r,1)),e.mode){case"h":e.color.setHSV(1-i,null,null);break;case"s":e.color.setHSV(null,1-i,null);break;case"v":e.color.setHSV(null,null,1-i);break;case"r":e.color.setRGB(1-i,null,null);break;case"g":e.color.setRGB(null,1-i,null);break;case"b":e.color.setRGB(null,null,1-i);break;case"a":e.color.setAlpha(1-i)}e._change(!1)}},c=function(){var o='<div class="ui-colorpicker-bar ui-colorpicker-bar-'+(e.options.part.bar.size||256)+'  ui-colorpicker-border"><span class="ui-colorpicker-bar-layer-1">&nbsp;</span><span class="ui-colorpicker-bar-layer-2">&nbsp;</span><span class="ui-colorpicker-bar-layer-3">&nbsp;</span><span class="ui-colorpicker-bar-layer-4">&nbsp;</span>';return e.options.alpha&&(o+='<span class="ui-colorpicker-bar-layer-alpha">&nbsp;</span><span class="ui-colorpicker-bar-layer-alphabar">&nbsp;</span>'),o+='<span class="ui-colorpicker-bar-layer-pointer"><span class="ui-colorpicker-bar-pointer"></span></span></div>'},this.init=function(){u=o(c()).appendTo(o(".ui-colorpicker-bar-container",e.dialog)),u.bind("mousedown",n),p[1]=o(".ui-colorpicker-bar-layer-1",u),p[2]=o(".ui-colorpicker-bar-layer-2",u),p[3]=o(".ui-colorpicker-bar-layer-3",u),p[4]=o(".ui-colorpicker-bar-layer-4",u),p.a=o(".ui-colorpicker-bar-layer-alpha",u),p.ab=o(".ui-colorpicker-bar-layer-alphabar",u),p.p=o(".ui-colorpicker-bar-layer-pointer",u),i=p.p.width(),r=p.p.height(),t=o(".ui-colorpicker-bar-pointer",u)},this.update=function(){var o=65*(e.options.part.bar.size||256)/64;switch(e.mode){case"h":case"s":case"v":case"r":case"g":case"b":p.a.show(),p.ab.hide();break;case"a":p.a.hide(),p.ab.show()}switch(e.mode){case"h":p[1].css({"background-position":"0 0",opacity:""}).show(),p[2].hide(),p[3].hide(),p[4].hide();break;case"s":p[1].css({"background-position":"0 "+-o+"px",opacity:""}).show(),p[2].css({"background-position":"0 "+2*-o+"px",opacity:""}).show(),p[3].hide(),p[4].hide();break;case"v":p[1].css({"background-position":"0 "+2*-o+"px",opacity:""}).show(),p[2].hide(),p[3].hide(),p[4].hide();break;case"r":p[1].css({"background-position":"0 "+6*-o+"px",opacity:""}).show(),p[2].css({"background-position":"0 "+5*-o+"px",opacity:""}).show(),p[3].css({"background-position":"0 "+3*-o+"px",opacity:""}).show(),p[4].css({"background-position":"0 "+4*-o+"px",opacity:""}).show();break;case"g":p[1].css({"background-position":"0 "+10*-o+"px",opacity:""}).show(),p[2].css({"background-position":"0 "+9*-o+"px",opacity:""}).show(),p[3].css({"background-position":"0 "+7*-o+"px",opacity:""}).show(),p[4].css({"background-position":"0 "+8*-o+"px",opacity:""}).show();break;case"b":p[1].css({"background-position":"0 "+14*-o+"px",opacity:""}).show(),p[2].css({"background-position":"0 "+13*-o+"px",opacity:""}).show(),p[3].css({"background-position":"0 "+11*-o+"px",opacity:""}).show(),p[4].css({"background-position":"0 "+12*-o+"px",opacity:""}).show();break;case"a":p[1].hide(),p[2].hide(),p[3].hide(),p[4].hide()}l.repaint()},this.repaint=function(){var o=0;switch(e.mode){case"h":o=(1-e.color.getHSV().h)*r;break;case"s":var i=e.color.getHSV();o=(1-i.s)*r,p[2].css("opacity",1-i.v),u.css("background-color",e.color.copy().setHSV(null,1,null).toCSS());break;case"v":o=(1-e.color.getHSV().v)*r,u.css("background-color",e.color.copy().setHSV(null,null,1).toCSS());break;case"r":var n=e.color.getRGB();o=(1-n.r)*r,p[2].css("opacity",Math.max(0,n.b-n.g)),p[3].css("opacity",Math.max(0,n.g-n.b)),p[4].css("opacity",Math.min(n.b,n.g));break;case"g":var n=e.color.getRGB();o=(1-n.g)*r,p[2].css("opacity",Math.max(0,n.b-n.r)),p[3].css("opacity",Math.max(0,n.r-n.b)),p[4].css("opacity",Math.min(n.r,n.b));break;case"b":var n=e.color.getRGB();o=(1-n.b)*r,p[2].css("opacity",Math.max(0,n.r-n.g)),p[3].css("opacity",Math.max(0,n.g-n.r)),p[4].css("opacity",Math.min(n.r,n.g));break;case"a":o=(1-e.color.getAlpha())*r,u.css("background-color",e.color.copy().toCSS())}"a"!==e.mode&&p.a.css("opacity",1-e.color.getAlpha()),t.css("top",o-3)}},preview:function(e){var t,i,r,n,a,s,c=null;s=function(){return'<div class="ui-colorpicker-preview ui-colorpicker-border"><div class="ui-colorpicker-preview-initial"><div class="ui-colorpicker-preview-initial-alpha"></div></div><div class="ui-colorpicker-preview-current"><div class="ui-colorpicker-preview-current-alpha"></div></div></div>'},this.init=function(){c=o(s()).appendTo(o(".ui-colorpicker-preview-container",e.dialog)),o(".ui-colorpicker-preview-initial",c).click(function(){e.color=e.currentColor.copy(),e._change()}),i=o(".ui-colorpicker-preview-initial",c),r=o(".ui-colorpicker-preview-initial-alpha",c),n=o(".ui-colorpicker-preview-current",c),a=o(".ui-colorpicker-preview-current-alpha",c),t=o(".ui-colorpicker-preview-initial-alpha, .ui-colorpicker-preview-current-alpha",c)},this.update=function(){t[e.options.alpha?"show":"hide"](),this.repaint()},this.repaint=function(){var o=e.currentColor,t=e.color,s=o.set?o.toCSS():"",c=t.set?t.toCSS():"";i.css("background-color",s).attr("title",s),r.css("opacity",1-o.getAlpha()),n.css("background-color",c).attr("title",c),a.css("opacity",1-t.getAlpha())}},hsv:function(e){var t,i=null,r={};t=function(){var o="";return e.options.hsv&&(o+='<div class="ui-colorpicker-hsv-h"><input class="ui-colorpicker-mode" type="radio" value="h" id="seq-'+ ++l+'"/><label for="seq-'+l+'">'+e._getRegional("hsvH")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="360" size="10"/><span class="ui-colorpicker-unit">&deg;</span></div>'+('<div class="ui-colorpicker-hsv-s"><input class="ui-colorpicker-mode" type="radio" value="s" id="seq-'+ ++l+'"/><label for="seq-'+l+'">'+e._getRegional("hsvS")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="100" size="10"/><span class="ui-colorpicker-unit">%</span></div>')+('<div class="ui-colorpicker-hsv-v"><input class="ui-colorpicker-mode" type="radio" value="v" id="seq-'+ ++l+'"/><label for="seq-'+l+'">'+e._getRegional("hsvV")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="100" size="10"/><span class="ui-colorpicker-unit">%</span></div>')),'<div class="ui-colorpicker-hsv">'+o+"</div>"},this.init=function(){i=o(t()).appendTo(o(".ui-colorpicker-hsv-container",e.dialog)),o(".ui-colorpicker-mode",i).click(function(){e.mode=o(this).val(),e._updateAllParts()}),r.h=o(".ui-colorpicker-hsv-h .ui-colorpicker-number",i),r.s=o(".ui-colorpicker-hsv-s .ui-colorpicker-number",i),r.v=o(".ui-colorpicker-hsv-v .ui-colorpicker-number",i),o(".ui-colorpicker-number",i).bind("change keyup",function(){e.color.setHSV(r.h.val()/360,r.s.val()/100,r.v.val()/100),e._change()})},this.repaint=function(){var o=e.color.getHSV();r.h.val(Math.round(360*o.h)),r.s.val(Math.round(100*o.s)),r.v.val(Math.round(100*o.v))},this.update=function(){o(".ui-colorpicker-mode",i).each(function(){var t=o(this);t.attr("checked",t.val()===e.mode)}),this.repaint()}},rgb:function(e){var t,i=null,r={};t=function(){var o="";return e.options.rgb&&(o+='<div class="ui-colorpicker-rgb-r"><input class="ui-colorpicker-mode" type="radio" value="r" id="seq-'+ ++l+'"/><label for="seq-'+l+'">'+e._getRegional("rgbR")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="255"/></div>'+('<div class="ui-colorpicker-rgb-g"><input class="ui-colorpicker-mode" type="radio" value="g" id="seq-'+ ++l+'"/><label for="seq-'+l+'">'+e._getRegional("rgbG")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="255"/></div>')+('<div class="ui-colorpicker-rgb-b"><input class="ui-colorpicker-mode" type="radio" value="b" id="seq-'+ ++l+'"/><label for="seq-'+l+'">'+e._getRegional("rgbB")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="255"/></div>')),'<div class="ui-colorpicker-rgb">'+o+"</div>"},this.init=function(){i=o(t()).appendTo(o(".ui-colorpicker-rgb-container",e.dialog)),o(".ui-colorpicker-mode",i).click(function(){e.mode=o(this).val(),e._updateAllParts()}),r.r=o(".ui-colorpicker-rgb-r .ui-colorpicker-number",i),r.g=o(".ui-colorpicker-rgb-g .ui-colorpicker-number",i),r.b=o(".ui-colorpicker-rgb-b .ui-colorpicker-number",i),o(".ui-colorpicker-number",i).bind("change keyup",function(){o(".ui-colorpicker-rgb-r .ui-colorpicker-number",i).val();e.color.setRGB(r.r.val()/255,r.g.val()/255,r.b.val()/255),e._change()})},this.repaint=function(){var o=e.color.getRGB();r.r.val(Math.round(255*o.r)),r.g.val(Math.round(255*o.g)),r.b.val(Math.round(255*o.b))},this.update=function(){o(".ui-colorpicker-mode",i).each(function(){var t=o(this);t.attr("checked",t.val()===e.mode)}),this.repaint()}},lab:function(e){var t=null,i={},r=function n(){var n="";return e.options.hsv&&(n+='<div class="ui-colorpicker-lab-l"><label for="seq-'+ ++l+'">'+e._getRegional("labL")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="100" id="seq-'+l+'"/></div>'+('<div class="ui-colorpicker-lab-a"><label for="seq-'+ ++l+'">'+e._getRegional("labA")+'</label><input class="ui-colorpicker-number" type="number" min="-128" max="127" id="seq-'+l+'"/></div>')+('<div class="ui-colorpicker-lab-b"><label for="seq-'+ ++l+'">'+e._getRegional("labB")+'</label><input class="ui-colorpicker-number" type="number" min="-128" max="127" id="seq-'+l+'"/></div>')),'<div class="ui-colorpicker-lab">'+n+"</div>"};this.init=function(){t=o(r()).appendTo(o(".ui-colorpicker-lab-container",e.dialog)),i.l=o(".ui-colorpicker-lab-l .ui-colorpicker-number",t),i.a=o(".ui-colorpicker-lab-a .ui-colorpicker-number",t),i.b=o(".ui-colorpicker-lab-b .ui-colorpicker-number",t),o(".ui-colorpicker-number",t).bind("change keyup",function(o){e.color.setLAB(parseInt(i.l.val(),10)/100,(parseInt(i.a.val(),10)+128)/255,(parseInt(i.b.val(),10)+128)/255),e._change()})},this.repaint=function(){var o=e.color.getLAB();i.l.val(Math.round(100*o.l)),i.a.val(Math.round(255*o.a)-128),i.b.val(Math.round(255*o.b)-128)},this.update=this.repaint},cmyk:function(e){var t=null,i={},r=function n(){var n="";return e.options.hsv&&(n+='<div class="ui-colorpicker-cmyk-c"><label for="seq-'+ ++l+'">'+e._getRegional("cmykC")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="100" id="seq-'+l+'"/><span class="ui-colorpicker-unit">%</span></div>'+('<div class="ui-colorpicker-cmyk-m"><label for="seq-'+ ++l+'">'+e._getRegional("cmykM")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="100" id="seq-'+l+'"/><span class="ui-colorpicker-unit">%</span></div>')+('<div class="ui-colorpicker-cmyk-y"><label for="seq-'+ ++l+'">'+e._getRegional("cmykY")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="100" id="seq-'+l+'"/><span class="ui-colorpicker-unit">%</span></div>')+('<div class="ui-colorpicker-cmyk-k"><label for="seq-'+ ++l+'">'+e._getRegional("cmykK")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="100" id="seq-'+l+'"/><span class="ui-colorpicker-unit">%</span></div>')),'<div class="ui-colorpicker-cmyk">'+n+"</div>"};this.init=function(){t=o(r()).appendTo(o(".ui-colorpicker-cmyk-container",e.dialog)),i.c=o(".ui-colorpicker-cmyk-c .ui-colorpicker-number",t),i.m=o(".ui-colorpicker-cmyk-m .ui-colorpicker-number",t),i.y=o(".ui-colorpicker-cmyk-y .ui-colorpicker-number",t),i.k=o(".ui-colorpicker-cmyk-k .ui-colorpicker-number",t),o(".ui-colorpicker-number",t).bind("change keyup",function(o){e.color.setCMYK(parseInt(i.c.val(),10)/100,parseInt(i.m.val(),10)/100,parseInt(i.y.val(),10)/100,parseInt(i.k.val(),10)/100),e._change()})},this.repaint=function(){var o=e.color.getCMYK();i.c.val(Math.round(100*o.c)),i.m.val(Math.round(100*o.m)),i.y.val(Math.round(100*o.y)),i.k.val(Math.round(100*o.k))},this.update=this.repaint},alpha:function(e){var t,i=null,r=function n(){var n="";return e.options.alpha&&(n+='<div class="ui-colorpicker-a"><input class="ui-colorpicker-mode" name="mode" type="radio" value="a" id="seq-'+ ++l+'"/><label for="seq-'+l+'">'+e._getRegional("alphaA")+'</label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><span class="ui-colorpicker-unit">%</span></div>'),'<div class="ui-colorpicker-alpha">'+n+"</div>"};this.init=function(){i=o(r()).appendTo(o(".ui-colorpicker-alpha-container",e.dialog)),o(".ui-colorpicker-mode",i).click(function(){e.mode=o(this).val(),e._updateAllParts()}),t=o(".ui-colorpicker-a .ui-colorpicker-number",i),o(".ui-colorpicker-number",i).bind("change keyup",function(){e.color.setAlpha(t.val()/100),e._change()})},this.update=function(){o(".ui-colorpicker-mode",i).each(function(){o(this).attr("checked",o(this).val()===e.mode)}),this.repaint()},this.repaint=function(){t.val(Math.round(100*e.color.getAlpha()))}},hex:function(e){var t,i=null,r={};t=function(){var o="";return e.options.alpha&&(o+='<input class="ui-colorpicker-hex-alpha" type="text" maxlength="2" size="2"/>'),o+='<input class="ui-colorpicker-hex-input" type="text" maxlength="6" size="6"/>','<div class="ui-colorpicker-hex"><label>#</label>'+o+"</div>"},this.init=function(){i=o(t()).appendTo(o(".ui-colorpicker-hex-container",e.dialog)),r.color=o(".ui-colorpicker-hex-input",i),r.alpha=o(".ui-colorpicker-hex-alpha",i),r.color.bind("change keydown keyup",function(o,e,t){/[^a-fA-F0-9]/.test(r.color.val())&&r.color.val(r.color.val().replace(/[^a-fA-F0-9]/,""))}),r.color.bind("change keyup",function(){e.color=s(r.color.val()).setAlpha(e.color.getAlpha()),e._change()}),r.alpha.bind("change keydown keyup",function(){/[^a-fA-F0-9]/.test(r.alpha)&&r.alpha.val(r.alpha.val().replace(/[^a-fA-F0-9]/,""))}),r.alpha.bind("change keyup",function(){e.color.setAlpha(parseInt(r.alpha.val(),16)/255),e._change()})},this.repaint=function(){r.color.is(":focus")||r.color.val(e.color.toHex(!0)),r.alpha.is(":focus")||r.alpha.val(a(255*e.color.getAlpha()))},this.update=this.repaint},swatches:function(t){function i(o){var e=o.target.dataset;e.r&&(t.color.setRGB(+e.r,+e.g,+e.b).setAlpha(+e.a),t._change())}var r;this.init=function(){var n="data:image/svg+xml;utf8,&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 0 11 11&quot;&gt;",a="";t._eachSwatch(function(o,t){var i=Math.round(255*t.r)+","+(Math.round(255*t.g)+","+Math.round(255*t.b));a+='<div class="ui-colorpicker-swatch" title="'+o+'" style="'+(t.a<1?"background-image:url('"+n+"&lt;rect x=&quot;0&quot; y=&quot;0&quot; width=&quot;11&quot; height=&quot;11&quot;"+(" fill=&quot;rgba("+i+","+t.a+")&quot;/&gt;&lt;/svg&gt;'),"+e+";")+"background-size:cover,cover":"background-color:rgb("+i+")")+'"'+(' data-r="'+t.r+'" data-g="'+t.g+'" data-b="'+t.b+'" data-a="'+t.a+'"')+"></div>"}),r||(r=o('<div class="ui-colorpicker-swatches ui-colorpicker-border"'+(' style="width:'+t.options.swatchesWidth+"px")+((t.options.swatchesHeight?";height:"+t.options.swatchesHeight+"px":"")+'"/>')).click(i).appendTo(o(".ui-colorpicker-swatches-container",t.dialog))),r.html(a).scrollTop(0)}},footer:function(e){var t=null,i="ui-colorpicker-special-transparent-"+e.colorpicker_index,r="ui-colorpicker-special-none-"+e.colorpicker_index,n=function a(){var a="";return(e.options.alpha||!e.inline&&e.options.showNoneButton)&&(a+='<div class="ui-colorpicker-buttonset">',e.options.alpha&&(a+='<input type="radio" name="ui-colorpicker-special" id="'+i+'" class="ui-colorpicker-special-transparent"/><label for="'+i+'">'+e._getRegional("transparent")+"</label>"),!e.inline&&e.options.showNoneButton&&(a+='<input type="radio" name="ui-colorpicker-special" id="'+r+'" class="ui-colorpicker-special-none"><label for="'+r+'">'+e._getRegional("none")+"</label>"),a+="</div>"),e.inline||(a+='<div class="ui-dialog-buttonset">',e.options.showCancelButton&&(a+='<button class="ui-colorpicker-cancel">'+e._getRegional("cancel")+"</button>"),a+='<button class="ui-colorpicker-ok">'+e._getRegional("ok")+"</button>",a+="</div>"),'<div class="ui-dialog-buttonpane ui-widget-content">'+a+"</div>"};this.init=function(){t=o(n()).appendTo(e.dialog),o(".ui-colorpicker-ok",t).button().click(function(){e.close()}),o(".ui-colorpicker-cancel",t).button().click(function(){e.close(!0)}),o(".ui-colorpicker-buttonset",t).buttonset(),o(".ui-colorpicker-special-color",t).click(function(){e._change()}),o("#"+r,t).click(function(){e.color.set=!1,e._change()}),o("#"+i,t).click(function(){e.color.setAlpha(0),e._change()})},this.repaint=function(){e.color.set?0===e.color.getAlpha()?o(".ui-colorpicker-special-transparent",t).attr("checked",!0).button("refresh"):o("input",t).attr("checked",!1).button("refresh"):o(".ui-colorpicker-special-none",t).attr("checked",!0).button("refresh"),o(".ui-colorpicker-ok",t).button(e.changed?"enable":"disable")},this.update=function(){}}},this.Color=function(){var e={rgb:{r:0,g:0,b:0},hsv:{h:0,s:0,v:0},hsl:{h:0,s:0,l:0},lab:{l:0,a:0,b:0},cmyk:{c:0,m:0,y:0,k:1}},t=1,i=[.9504285,1,1.0889],r=arguments,n=function(e){return isNaN(e)||null==e?0:("string"==typeof e&&(e=parseInt(e,10)),o.colorpicker.Color.fixNum(e,0,1,5))},a=function(o){var o=Math.round(o),e="0123456789abcdef",t=o%16,i=(o-t)/16,r=e.charAt(i)+e.charAt(t);return r},s=function(o){var e=o.r>.04045?Math.pow((o.r+.055)/1.055,2.4):o.r/12.92,t=o.g>.04045?Math.pow((o.g+.055)/1.055,2.4):o.g/12.92,i=o.b>.04045?Math.pow((o.b+.055)/1.055,2.4):o.b/12.92;return{x:.4124*e+.3576*t+.1805*i,y:.2126*e+.7152*t+.0722*i,z:.0193*e+.1192*t+.9505*i}},c=function(o){var e={r:3.2406*o.x+-1.5372*o.y+o.z*-.4986,g:o.x*-.9689+1.8758*o.y+.0415*o.z,b:.0557*o.x+o.y*-.204+1.057*o.z};return e.r=e.r>.0031308?1.055*Math.pow(e.r,1/2.4)-.055:12.92*e.r,e.g=e.g>.0031308?1.055*Math.pow(e.g,1/2.4)-.055:12.92*e.g,e.b=e.b>.0031308?1.055*Math.pow(e.b,1/2.4)-.055:12.92*e.b,e},l=function(o){var e,t,i,r=Math.min(o.r,o.g,o.b),n=Math.max(o.r,o.g,o.b),a=n-r,s={h:0,s:0,v:n};return 0===a?(s.h=0,s.s=0):(s.s=a/n,e=((n-o.r)/6+a/2)/a,t=((n-o.g)/6+a/2)/a,i=((n-o.b)/6+a/2)/a,o.r===n?s.h=i-t:o.g===n?s.h=1/3+e-i:o.b===n&&(s.h=2/3+t-e),s.h<0?s.h+=1:s.h>1&&(s.h-=1)),s},u=function(o){var e,t,i,r,n,a={r:0,g:0,b:0};return 0===o.s?a.r=a.g=a.b=o.v:(e=1===o.h?0:6*o.h,t=Math.floor(e),i=o.v*(1-o.s),r=o.v*(1-o.s*(e-t)),n=o.v*(1-o.s*(1-(e-t))),0===t?(a.r=o.v,a.g=n,a.b=i):1===t?(a.r=r,a.g=o.v,a.b=i):2===t?(a.r=i,a.g=o.v,a.b=n):3===t?(a.r=i,a.g=r,a.b=o.v):4===t?(a.r=n,a.g=i,a.b=o.v):(a.r=o.v,a.g=i,a.b=r)),a},p=function(o){var e,t,i,r=Math.min(o.r,o.g,o.b),n=Math.max(o.r,o.g,o.b),a=n-r,s={h:0,s:0,l:(n+r)/2};return 0===a?(s.h=0,s.s=0):(s.s=s.l<.5?a/(n+r):a/(2-n-r),e=((n-o.r)/6+a/2)/a,t=((n-o.g)/6+a/2)/a,i=((n-o.b)/6+a/2)/a,o.r===n?s.h=i-t:o.g===n?s.h=1/3+e-i:o.b===n&&(s.h=2/3+t-e),s.h<0?s.h+=1:s.h>1&&(s.h-=1)),s},h=function(o){var e,t,i=function(o,e,t){return 0>t&&(t+=1),t>1&&(t-=1),1>6*t?o+6*(e-o)*t:1>2*t?e:2>3*t?o+(e-o)*(2/3-t)*6:o};return 0===o.s?{r:o.l,g:o.l,b:o.l}:(t=o.l<.5?o.l*(1+o.s):o.l+o.s-o.s*o.l,e=2*o.l-t,{r:i(e,t,o.h+1/3),g:i(e,t,o.h),b:i(e,t,o.h-1/3)})},d=function(o){var e=o.x/i[0],t=o.y/i[1],r=o.z/i[2];return e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,{l:(116*t-16)/100,a:(500*(e-t)+128)/255,b:(200*(t-r)+128)/255}},b=function(o){var e={l:100*o.l,a:255*o.a-128,b:255*o.b-128},t={x:0,y:(e.l+16)/116,z:0};return t.x=e.a/500+t.y,t.z=t.y-e.b/200,t.x=Math.pow(t.x,3)>.008856?Math.pow(t.x,3):(t.x-16/116)/7.787,t.y=Math.pow(t.y,3)>.008856?Math.pow(t.y,3):(t.y-16/116)/7.787,t.z=Math.pow(t.z,3)>.008856?Math.pow(t.z,3):(t.z-16/116)/7.787,t.x*=i[0],t.y*=i[1],t.z*=i[2],t},g=function(o){return{c:1-o.r,m:1-o.g,y:1-o.b}},k=function(o){return{r:1-o.c,g:1-o.m,b:1-o.y}},m=function(o){var e=1;return o.c<e&&(e=o.c),o.m<e&&(e=o.m),o.y<e&&(e=o.y),1===e?{c:0,m:0,y:0,k:1}:{c:(o.c-e)/(1-e),m:(o.m-e)/(1-e),y:(o.y-e)/(1-e),k:e}},v=function(o){return{c:o.c*(1-o.k)+o.k,m:o.m*(1-o.k)+o.k,y:o.y*(1-o.k)+o.k}};this.set=!1,this.setAlpha=function(o){return null!==o&&(t=n(o)),this.set=!0,this},this.getAlpha=function(){return t},this.setRGB=function(o,t,i){return e={rgb:this.getRGB()},null!==o&&(e.rgb.r=n(o)),null!==t&&(e.rgb.g=n(t)),null!==i&&(e.rgb.b=n(i)),this.set=!0,this},this.setHSV=function(o,t,i){return e={hsv:this.getHSV()},null!==o&&(e.hsv.h=n(o)),null!==t&&(e.hsv.s=n(t)),null!==i&&(e.hsv.v=n(i)),this.set=!0,this},this.setHSL=function(o,t,i){return e={hsl:this.getHSL()},null!==o&&(e.hsl.h=n(o)),null!==t&&(e.hsl.s=n(t)),null!==i&&(e.hsl.l=n(i)),this.set=!0,this},this.setLAB=function(o,t,i){return e={lab:this.getLAB()},null!==o&&(e.lab.l=n(o)),null!==t&&(e.lab.a=n(t)),null!==i&&(e.lab.b=n(i)),this.set=!0,this},this.setCMYK=function(o,t,i,r){return e={cmyk:this.getCMYK()},null!==o&&(e.cmyk.c=n(o)),null!==t&&(e.cmyk.m=n(t)),null!==i&&(e.cmyk.y=n(i)),null!==r&&(e.cmyk.k=n(r)),this.set=!0,this},this.getRGB=function(){return e.rgb||(e.rgb=e.lab?c(b(e.lab)):e.hsv?u(e.hsv):e.hsl?h(e.hsl):e.cmyk?k(v(e.cmyk)):{r:0,g:0,b:0},e.rgb.r=n(e.rgb.r),e.rgb.g=n(e.rgb.g),e.rgb.b=n(e.rgb.b)),o.extend({},e.rgb)},this.getHSV=function(){return e.hsv||(e.hsv=e.lab?l(this.getRGB()):e.rgb?l(e.rgb):e.hsl?l(this.getRGB()):e.cmyk?l(this.getRGB()):{h:0,s:0,v:0},e.hsv.h=n(e.hsv.h),e.hsv.s=n(e.hsv.s),e.hsv.v=n(e.hsv.v)),o.extend({},e.hsv)},this.getHSL=function(){return e.hsl||(e.hsl=e.rgb?p(e.rgb):e.hsv?p(this.getRGB()):e.cmyk?p(this.getRGB()):e.hsv?p(this.getRGB()):{h:0,s:0,l:0},e.hsl.h=n(e.hsl.h),e.hsl.s=n(e.hsl.s),e.hsl.l=n(e.hsl.l)),o.extend({},e.hsl)},this.getCMYK=function(){return e.cmyk||(e.cmyk=e.rgb?m(g(e.rgb)):e.hsv?m(g(this.getRGB())):e.hsl?m(g(this.getRGB())):e.lab?m(g(this.getRGB())):{c:0,m:0,y:0,k:1},e.cmyk.c=n(e.cmyk.c),e.cmyk.m=n(e.cmyk.m),e.cmyk.y=n(e.cmyk.y),e.cmyk.k=n(e.cmyk.k)),o.extend({},e.cmyk)},this.getLAB=function(){return e.lab||(e.lab=e.rgb?d(s(e.rgb)):e.hsv?d(s(this.getRGB())):e.hsl?d(s(this.getRGB())):e.cmyk?d(s(this.getRGB())):{l:0,a:0,b:0},e.lab.l=n(e.lab.l),e.lab.a=n(e.lab.a),e.lab.b=n(e.lab.b)),o.extend({},e.lab)},this.getChannels=function(){return{r:this.getRGB().r,g:this.getRGB().g,b:this.getRGB().b,a:this.getAlpha(),h:this.getHSV().h,s:this.getHSV().s,v:this.getHSV().v,c:this.getCMYK().c,m:this.getCMYK().m,y:this.getCMYK().y,k:this.getCMYK().k,L:this.getLAB().l,A:this.getLAB().a,B:this.getLAB().b}},this.getSpaces=function(){return o.extend(!0,{},e)},this.distance=function(o){var e,t="lab",i="get"+t.toUpperCase(),r=this[i](),n=o[i](),a=0;for(e in r)a+=Math.pow(r[e]-n[e],2);return a},this.equals=function(o){if(o){var e=this.getRGB(),t=o.getRGB();return this.set===o.set&&this.getAlpha()===o.getAlpha()&&e.r===t.r&&e.g===t.g&&e.b===t.b}return!1},this.limit=function(o){o-=1;var e=this.getRGB();this.setRGB(Math.round(e.r*o)/o,Math.round(e.g*o)/o,Math.round(e.b*o)/o)},this.toHex=function(){var o=this.getRGB();return a(255*o.r)+a(255*o.g)+a(255*o.b)},this.toCSS=function(){return"#"+this.toHex()},this.copy=function(){var e=new o.colorpicker.Color(this.getSpaces(),this.getAlpha());return e.set=this.set,e},2===r.length&&(e=r[0],this.setAlpha(0===r[1]?0:r[1]||1),this.set=!0),r.length>2&&(this.setRGB(r[0],r[1],r[2]),this.setAlpha(0===r[3]?0:r[3]||1),this.set=!0)}},o.widget("vanderlee.colorpicker",{options:{alpha:!1,altAlpha:!0,altField:"",altOnChange:!0,altProperties:"background-color",autoOpen:!1,buttonClass:null,buttonColorize:!1,buttonImage:"images/ui-colorpicker.png",buttonImageOnly:!1,buttonText:null,closeOnEscape:!0,closeOnOutside:!0,color:[0,1,0],colorFormat:"HEX",draggable:!0,containment:null,duration:"fast",hideOn:"button",hsv:!0,inline:!0,inlineFrame:!0,layout:{map:[0,0,1,5],bar:[1,0,1,5],preview:[2,0,1,1],hsv:[2,1,1,1],rgb:[2,2,1,1],alpha:[2,3,1,1],hex:[2,4,1,1],lab:[3,1,1,1],cmyk:[3,2,1,2],swatches:[4,0,1,5]},limit:"",modal:!1,mode:"h",okOnEnter:!1,parts:"",part:{map:{size:256},bar:{size:256}},position:null,regional:"",revert:!1,rgb:!0,showAnim:"fadeIn",showCancelButton:!0,showNoneButton:!1,showCloseButton:!0,showOn:"focus click alt",showOptions:{},swatches:null,swatchesWidth:84,title:null,cancel:null,close:null,init:null,ok:null,open:null,select:null,stop:null},_create:function(){var e,i=this;return i.colorpicker_index=t++,i.widgetEventPrefix="colorpicker",i.opened=!1,i.generated=!1,i.inline=!1,i.changed=!1,i.dialog=null,i.button=null,i.image=null,i.overlay=null,i.events={window_resize:null,document_keydown:null,document_click_html:null},i.mode=i.options.mode,i.element.is("input")||i.options.inline===!1?(i._setColor(i.element.is("input")?i.element.val():i.options.color),i._callback("init"),/\bfocus|all|both\b/.test(i.options.showOn)&&i.element.bind("focus",function(){i.open();
}),/\bfocus|all|both\b/.test(i.options.hideOn)&&i.element.bind("focusout",function(o){i.close()}),/\bclick|all|both\b/.test(i.options.showOn)&&i.element.bind("click",function(o){i.opened&&/\bclick|all|both\b/.test(i.options.hideOn)?i.close():i.open()}),/\bbutton|all|both\b/.test(i.options.showOn)&&(""!==i.options.buttonImage&&(e=i.options.buttonText||i._getRegional("button"),i.image=o("<img/>").attr({src:i.options.buttonImage,alt:e,title:e}),i.options.buttonClass&&i.image.attr("class",i.options.buttonClass),i._setImageBackground()),i.options.buttonImageOnly&&i.image?i.button=i.image:(i.button=o('<button type="button"></button>').html(i.image||i.options.buttonText).button(),i.image=i.image?o("img",i.button).first():null),i.button.insertAfter(i.element).click(function(){i.opened&&/\bbutton|all|both\b/.test(i.options.hideOn)?i.close():i.open()})),/\balt|all|both\b/.test(i.options.showOn)&&o(i.options.altField).bind("click",function(){i.opened&&/\balt|all|both\b/.test(i.options.hideOn)?i.close():i.open()}),i.options.autoOpen&&i.open()):(i.inline=!0,i._generate(),i.opened=!0),this},_setOption:function(e,t){switch(e){case"disabled":t?this.dialog.addClass("ui-colorpicker-disabled"):this.dialog.removeClass("ui-colorpicker-disabled");break;case"swatches":this.options.swatches=t,this.parts.swatches.init()}o.Widget.prototype._setOption.apply(this,arguments)},_setImageBackground:function(){this.image&&this.options.buttonColorize&&this.image.css("background-color",this.color.set?this._formatColor("RGBA",this.color):"")},_setAltField:function(){if(this.options.altOnChange&&this.options.altField&&this.options.altProperties){var e,t,i=this.options.altProperties.split(",");for(e=0;e<=i.length;++e)switch(t=o.trim(i[e])){case"color":case"fill":case"stroke":case"background-color":case"backgroundColor":case"outline-color":case"border-color":o(this.options.altField).css(t,this.color.set?this.color.toCSS():"")}this.options.altAlpha&&o(this.options.altField).css("opacity",this.color.set?this.color.getAlpha():"")}},_setColor:function(e){Array.isArray(e)?this.color=new(Function.prototype.bind.apply(o.colorpicker.Color,[null].concat(_toConsumableArray(e)))):this.color=this._parseColor(e)||new o.colorpicker.Color,this.currentColor=this.color.copy(),this._setImageBackground(),this._setAltField()},setColor:function(o){this._setColor(o),this._change()},getColor:function(o){return this._formatColor(o||this.options.colorFormat,this.color)},_generateInline:function(){var e=this;o(e.element).html(e.options.inlineFrame?r:n),e.dialog=o(".ui-colorpicker",e.element)},_generatePopup:function(){var e=this;e.dialog=o(i).appendTo("body"),null===e.events.document_click_html&&o(document).delegate("html","touchstart click",e.events.document_click_html=function(t){if(e.opened&&t.target!==e.element[0]&&!e.overlay){if(e.dialog.is(t.target)||e.dialog.has(t.target).length>0)return void e.element.blur();var i,r=o(t.target).parents();for(r.push(t.target),i=0;i<=r.length;++i){if(null!==e.button&&r[i]===e.button[0])return;if(/\balt|all|both\b/.test(e.options.showOn)&&o(e.options.altField).is(r[i]))return}e.options.closeOnOutside&&e.close(e.options.revert)}}),null===e.events.document_keydown&&o(document).bind("keydown",e.events.document_keydown=function(o){e.opened&&27===o.keyCode&&e.options.closeOnEscape&&e.close(e.options.revert),e.opened&&13===o.keyCode&&e.options.okOnEnter&&e.close()}),e.element.keydown(function(o){9===o.keyCode&&e.close()}).keyup(function(o){var t=e._parseColor(e.element.val());t&&!e.color.equals(t)&&(e.color=t,e._change())})},_generate:function(){var e,t,i,r,n=this;n._setColor(n.inline||!n.element.is("input")?n.options.color:n.element.val()),n[n.inline?"_generateInline":"_generatePopup"](),e="string"==typeof n.options.parts?o.colorpicker.partslists[n.options.parts]?o.colorpicker.partslists[n.options.parts]:o.colorpicker.partslists[n.inline?"inline":"popup"]:n.options.parts,n.parts={},o.each(e,function(e,t){o.colorpicker.parts[t]&&(n.parts[t]=new o.colorpicker.parts[t](n))}),n.generated||(t=[],o.each(n.options.layout,function(o,e){n.parts[o]&&t.push({part:o,pos:e})}),i=o(c(t,function(o,e,t){return r=["ui-colorpicker-"+o.part+"-container"],e>0&&r.push("ui-colorpicker-padding-left"),t>0&&r.push("ui-colorpicker-padding-top"),'<td  class="'+r.join(" ")+'"'+(o.pos[2]>1?' colspan="'+o.pos[2]+'"':"")+(o.pos[3]>1?' rowspan="'+o.pos[3]+'"':"")+' valign="top"></td>'})).appendTo(n.dialog),n.options.inlineFrame&&i.addClass("ui-dialog-content ui-widget-content"),n._initAllParts(),n._updateAllParts(),n.generated=!0)},_effectGeneric:function(e,t,i,r,n){var a=this;o.effects&&o.effects[a.options.showAnim]?e[t](a.options.showAnim,a.options.showOptions,a.options.duration,n):(e["slideDown"===a.options.showAnim?i:"fadeIn"===a.options.showAnim?r:t](a.options.showAnim?a.options.duration:null,n),a.options.showAnim&&a.options.duration||n())},_effectShow:function(o,e){this._effectGeneric(o,"show","slideDown","fadeIn",e)},_effectHide:function(o,e){this._effectGeneric(o,"hide","slideUp","fadeOut",e)},open:function(){var e,t,i,r=this;r.opened||(r._generate(),t=r.element.is(":hidden")?o("<div/>").insertBefore(r.element):r.element,r.element.is(":hidden")&&t.remove(),e=0,o(r.element[0]).parents().each(function(){var t=o(this).css("z-index");if("number"!=typeof t&&"string"!=typeof t||""===t||isNaN(t))o(this).siblings().each(function(){var t=o(this).css("z-index");"number"!=typeof t&&"string"!=typeof t||""===t||isNaN(t)||t>e&&(e=parseInt(t,10))});else if(t>e)return e=parseInt(t,10),!1}),e+=2,r.dialog.css("z-index",e),r.options.modal&&(r.overlay=o('<div class="ui-widget-overlay"></div>').appendTo("body").css("z-index",e-1),null!==r.events.window_resize&&o(window).unbind("resize",r.events.window_resize),r.events.window_resize=function(){r.overlay&&(r.overlay.width(o(document).width()),r.overlay.height(o(document).height()))},o(window).bind("resize",r.events.window_resize),r.events.window_resize()),r._effectShow(this.dialog),r.options.position?(i=o.extend({},r.options.position),"element"===i.of&&(i.of=t)):i={my:"left top",at:"left bottom",of:t,collision:"flip"},r.dialog.position(i),r.opened=!0,r._callback("open",!0),o(function(){r._repaintAllParts()}))},close:function(e){var t=this;t.opened&&(e?(t.color=t.currentColor.copy(),t._change(),t._callback("cancel",!0)):(t.currentColor=t.color.copy(),t._callback("ok",!0)),t.changed=!1,t.overlay&&(o(window).unbind("resize",t.events.window_resize),t.overlay.remove()),t._effectHide(t.dialog,function(){t.dialog.remove(),t.dialog=null,t.generated=!1,t.opened=!1,t._callback("close",!0)}))},destroy:function(){null!==this.events.document_click_html&&o(document).undelegate("html","touchstart click",this.events.document_click_html),null!==this.events.document_keydown&&o(document).unbind("keydown",this.events.document_keydown),null!==this.events.resizeOverlay&&o(window).unbind("resize",this.events.resizeOverlay),this.element.unbind(),this.overlay&&this.overlay.remove(),null!==this.dialog&&this.dialog.remove(),null!==this.image&&this.image.remove(),null!==this.button&&this.button.remove(),o.each(this.parts,function(o,e){e.destroy&&e.destroy()})},_callback:function(o,e){var t,i,r=this;return r.color.set?(t={formatted:r._formatColor(r.options.colorFormat,r.color),colorPicker:r},i=r.color.getLAB(),i.a=2*i.a-1,i.b=2*i.b-1,e===!0&&(t.a=r.color.getAlpha(),t.rgb=r.color.getRGB(),t.hsv=r.color.getHSV(),t.cmyk=r.color.getCMYK(),t.hsl=r.color.getHSL(),t.lab=i),r._trigger(o,null,t)):r._trigger(o,null,{formatted:"",colorPicker:r})},_initAllParts:function(){o.each(this.parts,function(o,e){e.init&&e.init()})},_updateAllParts:function(){o.each(this.parts,function(o,e){e.update&&e.update()})},_repaintAllParts:function(){o.each(this.parts,function(o,e){e.repaint&&e.repaint()})},_change:function(e){this.color.set&&this.options.limit&&o.colorpicker.limits[this.options.limit]&&o.colorpicker.limits[this.options.limit](this.color,this),this.changed=!this.color.equals(this.currentColor),this.inline||(this.color.set?this.color.equals(this._parseColor(this.element.val()))||this.element.val(this._formatColor(this.options.colorFormat,this.color)).change():""!==this.element.val()&&this.element.val("").change(),this._setImageBackground(),this._setAltField()),this.options.color=this.color.set?this.color.toCSS():"",this.opened&&this._repaintAllParts(),this._callback("select"),("undefined"==typeof e?0:!e)||this._callback("stop")},_hoverable:function(o){o.hover(function(){o.addClass("ui-state-hover")},function(){o.removeClass("ui-state-hover")})},_focusable:function(o){o.focus(function(){o.addClass("ui-state-focus")}).blur(function(){o.removeClass("ui-state-focus")})},_getRegional:function(e){return void 0!==o.colorpicker.regional[this.options.regional][e]?o.colorpicker.regional[this.options.regional][e]:o.colorpicker.regional[""][e]},_getSwatches:function(){return"string"==typeof this.options.swatches?o.colorpicker.swatches[this.options.swatches]:o.isPlainObject(this.options.swatches)?this.options.swatches:o.colorpicker.swatches._},_eachSwatch:function(e){var t,i=this._getSwatches();o.each(i,function(r,n){return t=o.isArray(i)?n.name:r,e(t,n)})},_getSwatch:function(o){var e=!1;return this._eachSwatch(function(t,i){return t.toLowerCase()==o.toLowerCase()?(e=i,!1):void 0}),e},_parseFormat:function(e,t){var i,r,n={x:function(){return"([0-9a-fA-F]{2})"},d:function(){return"([12]?[0-9]{1,2})"},f:function(){return"([0-9]*\\.?[0-9]*)"},p:function(){return"([0-9]*\\.?[0-9]*)"}},a={x:function(o){return parseInt(o,16)/255},d:function(o){return o/255},f:function(o){return o},p:function(o){return.01*o}},s={r:"setRGB",g:"setRGB",b:"setRGB",h:"setHSV",s:"setHSV",v:"setHSV",c:"setCMYK",m:"setCMYK",y:"setCMYK",k:"setCMYK",L:"setLAB",A:"setLAB",B:"setLAB"},c={setRGB:["r","g","b"],setHSV:["h","s","v"],setCMYK:["c","m","y","k"],setLAB:["L","A","B"]},l=[],u=[],p=null;if(r=e.replace(/[()\\^$.|?*+[\]]/g,function(o){return"\\"+o}),r=r.replace(/\\?[argbhsvcmykLAB][xdfp]/g,function(o){if(o.match(/^\\/))return o.slice(1);var e=o.charAt(0),t=o.charAt(1);return l.push(e),u.push(a[t]),s[e]&&(p=s[e]),n[t]()}),p){var h=t.match(new RegExp(r));if(h){var d,b=[];h.shift(),o.each(c[p],function(e,t){d=o.inArray(t,l),b[e]=u[d](h[d])}),i=new o.colorpicker.Color,i[p].apply(i,b)}}return i},_parseColor:function(e){var t,i=this,r=o.isArray(i.options.colorFormat)?i.options.colorFormat:[i.options.colorFormat];return o.each(r,function(r,n){return t=o.colorpicker.parsers[n]?o.colorpicker.parsers[n](e,i):i._parseFormat(n,e),t?!1:void 0}),t||o.each(o.colorpicker.parsers,function(o,r){return t=r(e,i),t?!1:void 0}),t?t:!1},_exactName:function(e){var t=!1;return this._eachSwatch(function(i,r){return e.equals(new o.colorpicker.Color(r.r,r.g,r.b))?(t=i,!1):void 0}),t},_closestName:function(e){var t,i=(e.getRGB(),null),r=!1;return this._eachSwatch(function(n,a){if(t=e.distance(new o.colorpicker.Color(a.r,a.g,a.b)),i>t||null===i){if(r=n,1e-20>=t)return!1;i=t}}),r},_formatColor:function(e,t){var i=this,r=null,n={x:function(o){return a(255*o)},d:function(o){return Math.round(255*o)},f:function(o){return o},p:function(o){return 100*o}},s=t.getChannels();return o.isArray(e)||(e=[e]),o.each(e,function(e,a){return o.colorpicker.writers[a]?(r=o.colorpicker.writers[a](t,i),r===!1):(r=a.replace(/\\?[argbhsvcmykLAB][xdfp]/g,function(o){return o.match(/^\\/)?o.slice(1):n[o.charAt(1)](s[o.charAt(0)])}),!1)}),r}}),o.vanderlee.colorpicker});